
# This shell snippet gives simple access to ca's floating point
# capability from a POSIX shell.
#
# After including this code, use lines like this to calculate:
#	foo=$(fe "$bar * pi")
# or like this for a conditional:
#	if fc "(10 * 3) < $foo"; then ...

CA_INIT="3K 0commas errorexit"

_ca_run()    # support routine
{
    output=$(ca "$CA_INIT" "( $* )" q)
    exitcode=$?

    if [ $exitcode -le 1 ]; then
	echo $output
	return $exitcode
    fi

    echo ca failure: $output >&2
    exit 1
}

fe()	# Evaluate a floating point expression.
{
    _ca_run "$*"
    return 0
}

fc()	 # Evaluate a floating point conditional expression.
{
    _ca_run "$*" >/dev/null
}

